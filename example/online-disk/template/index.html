<html lang="zh-CN">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <head>
    <meta name="generator">
    <title>online disk</title>
	<style>
	* {
		margin:0;
		padding:0;
		box-sizing:border-box;
		-webkit-box-sizing:border-box;
		-moz-box-sizing:border-box;
		-webkit-font-smoothing:antialiased;
		-moz-font-smoothing:antialiased;
		-o-font-smoothing:antialiased;
		font-smoothing:antialiased;
		text-rendering:optimizeLegibility;
		font-family:Microsoft Yahei, "Open Sans", Helvetica, Arial, sans-serif;
	}

	body {
		font-family:Microsoft Yahei, "Open Sans", Helvetica, Arial, sans-serif;
		font-weight:300;
		font-size: 12px;
		line-height:30px;
		color:#777;
		background:#0CF;
	}

	.container {
		max-width:400px;
		width:100%;
		margin:0 auto;
		position:relative;
	}

	#contact input[type="text"], #contact input[type="email"], #contact input[type="tel"], #contact input[type="url"], #contact textarea, #contact button[type="submit"], #contact button[type="button"] { font:400 12px/16px Microsoft Yahei,"Open Sans", Helvetica, Arial, sans-serif; }

	#contact {
		background:#F9F9F9;
		padding:25px;
		margin:5px 0;
	}

	#div {
		background:#F9F9F9;
		padding:20px;
		margin:5px 0;
	}

	#contact h3 {
		color: #F96;
		display: block;
		font-size: 30px;
		font-weight: 400;
	}

	#contact h4 {
		margin:5px 0 15px;
		display:block;
		font-size:13px;
	}

	fieldset {
		border: medium none !important;
		margin: 0 0 10px;
		min-width: 100%;
		padding: 0;
		width: 100%;
	}

	#contact input[type="text"], #contact input[type="email"], #contact input[type="tel"], #contact input[type="url"], #contact textarea {
		width:100%;
		border:1px solid #CCC;
		background:#FFF;
		margin:0 0 5px;
		padding:10px;
	}

	#contact input[type="text"]:hover, #contact input[type="email"]:hover, #contact input[type="tel"]:hover, #contact input[type="url"]:hover, #contact textarea:hover {
		-webkit-transition:border-color 0.3s ease-in-out;
		-moz-transition:border-color 0.3s ease-in-out;
		transition:border-color 0.3s ease-in-out;
		border:1px solid #AAA;
	}

	#contact textarea {
		height:100px;
		max-width:100%;
	  resize:none;
	}

	#contact button[type="submit"] {
		cursor:pointer;
		width:100%;
		border:none;
		background:#ffb3b3;
		color:#000;
		margin:0 0 5px;
		padding:10px;
		font-size:15px;
	}

	#contact button[id="submit"] {
		cursor:pointer;
		width:100%;
		border:none;
		background:#ffff66;
		color:#000;
		margin:0 0 5px;
		padding:10px;
		font-size:15px;
	}

	#contact button[id="delete"] {
		cursor:pointer;
		width:100%;
		border:none;
		background:#ff6666;
		color:#000;
		margin:0 0 5px;
		padding:10px;
		font-size:15px;
	}
	#contact input[type="file"] {
		cursor:pointer;
		width:100%;
		border:none;
		background:#66ff33;
		color:#000;
		margin:0 0 5px;
		padding:10px;
		font-size:15px;
	}

	#contact a {
		outline:0;
		border:1px solid #999;
		color:#000;
		text-align: center;
		font-size: 1.5em;
	}

	#contact button[type="submit"]:hover {
		background:#09C;
		-webkit-transition:background 0.3s ease-in-out;
		-moz-transition:background 0.3s ease-in-out;
		transition:background-color 0.3s ease-in-out;
	}

	#contact button[type="submit"]:active { box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.5); }

	#contact input:focus, #contact textarea:focus {
		outline:0;
		border:1px solid #999;
	}
	::-webkit-input-placeholder {
	 color:#888;
	}
	:-moz-placeholder {
	 color:#888;
	}
	::-moz-placeholder {
	 color:#888;
	}
	:-ms-input-placeholder {
	 color:#888;
	}
	</style>
  </head>
  <body>
  	<div class="container">
  		<div id="contact">
		  	<div id="div">
		  		<h3>当前目录文件</h3>
		  	</div>
		  	<h4>选择操作文件明或目录名</h4>
		  	<input type="text" id="mkdir">
		  	<button type="button" id="submit" onclick="mkdir();">mkdir</button>
		  	<button type="button" id="delete" onclick="remove();">delete</button>
			<form action="/upload" method="post" enctype="multipart/form-data" id="sen">
				 	<h4>点击按钮选择文件</h4><input type="file" class="file1" name="file1" />
				 <button type="submit" class="but1">upload</button>
			</form>
  		</div>
	</div>
  </body>
  <script>
  	var url=window.location.pathname;
  	var allUrl=window.location.href;
  	var sen=document.getElementById("sen");
  	sen.action+=url;
  	sen.action+="/";
	console.log(sen.action);
	axios.post("/message"+url, {
	}).then(function (response) {
	    // console.log(response.data);
	    var arr=JSON.parse(JSON.stringify(response.data))['list'];
  		var div = document.getElementById("div");
	    for(var i in arr)
	    {
  			var linkTmp = document.createElement("a");
  			linkTmp.innerText=arr[i];
  			linkTmp.href =allUrl;
  			var len=linkTmp.href.length;
  			if(linkTmp.href[len-1]=='/')
  				linkTmp.href+=arr[i];
  			else
  				linkTmp.href+="/"+arr[i];
	    	console.log(arr[i]);
	    	div.appendChild(linkTmp);
	    	div.appendChild(document.createElement("br"));
	    }
  	});
  </script>
  <script>
  	function mkdir()
  	{
  		var sen=document.getElementById("mkdir");
  		var url=window.location.pathname+"/"+sen.value;
  		console.log(url);
	  	axios.post("/mkdir"+url, {
		}).then(function (response) {
			var status=JSON.parse(JSON.stringify(response.data))['status'];
			alert(status);
		});
  	}
  	function remove()
  	{
  		 var sen=document.getElementById("mkdir");
  		var url=window.location.pathname+"/"+sen.value;
  		console.log(url);
	  	axios.post("/delete"+url, {
		}).then(function (response) {
			var status=JSON.parse(JSON.stringify(response.data))['status'];
			alert(status);
		});
  	}
  </script>
</html>
