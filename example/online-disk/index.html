<html lang="zh-CN">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <head>
    <meta name="generator">
    <title>hahahaha</title>
  </head>
  <body>
  	<div id="div">
  	</div>
  	<input type="text" id="mkdir">
  	<button type="button" id="submit" onclick="mkdir();">mkdir</button>
  	<button type="button" id="delete" onclick="remove();">delete</button>
	<form action="/upload" method="post" enctype="multipart/form-data" id="sen">
		 <input type="file" class="file1" name="file1" />
		 <button type="submit" class="but1">upload</button>
	</form>
  </body>
  <script>
  	var url=window.location.pathname;
  	var allUrl=window.location.href;
  	var sen=document.getElementById("sen");
  	sen.action+=url;
  	sen.action+="/";
	console.log(sen.action);
	axios.post("/message"+url, {
	}).then(function (response) {
	    // console.log(response.data);
	    var arr=JSON.parse(JSON.stringify(response.data))['list'];
  		var div = document.getElementById("div");
	    for(var i in arr)
	    {
  			var linkTmp = document.createElement("a");
  			linkTmp.innerText=arr[i];
  			linkTmp.href =allUrl;
  			var len=linkTmp.href.length;
  			if(linkTmp.href[len-1]=='/')
  				linkTmp.href+=arr[i];
  			else
  				linkTmp.href+="/"+arr[i];
	    	console.log(arr[i]);
	    	div.appendChild(linkTmp);
	    	div.appendChild(document.createElement("br"))
	    }
  	});
  </script>
  <script>
  	function mkdir()
  	{
  		var sen=document.getElementById("mkdir");
  		var url=window.location.pathname+"/"+sen.value;
  		console.log(url);
	  	axios.post("/mkdir"+url, {
		}).then(function (response) {
			var status=JSON.parse(JSON.stringify(response.data))['status'];
			alert(status);
		});
  	}
  	function remove()
  	{
  		 var sen=document.getElementById("mkdir");
  		var url=window.location.pathname+"/"+sen.value;
  		console.log(url);
	  	axios.post("/delete"+url, {
		}).then(function (response) {
			var status=JSON.parse(JSON.stringify(response.data))['status'];
			alert(status);
		});
  	}
  </script>
</html>
